<svg viewBox="0 0 800 630" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" font-weight="bold" font-size="24">Smart Power Strip System Flow Chart</text>
  
  <!-- Definitions for arrowheads -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333333"/>
    </marker>
  </defs>
  
  <!-- User Node -->
  <rect x="350" y="80" width="100" height="60" fill="#e6ffe6" stroke="#00cc66" stroke-width="2" rx="10"/>
  <text x="400" y="115" text-anchor="middle" font-weight="bold" font-size="16">User</text>
  
  <!-- User Interface Node -->
  <rect x="350" y="180" width="100" height="60" fill="#e6ffe6" stroke="#00cc66" stroke-width="2" rx="10"/>
  <text x="400" y="205" text-anchor="middle" font-weight="bold" font-size="16">Blynk App</text>
  <text x="400" y="225" text-anchor="middle" font-size="12">User Interface</text>
  
  <!-- Blynk Cloud Node -->
  <ellipse cx="400" cy="300" rx="120" ry="50" fill="#ffe6e6" stroke="#cc0000" stroke-width="2"/>
  <text x="400" y="300" text-anchor="middle" font-weight="bold" font-size="16">Blynk Cloud</text>
  <text x="400" y="320" text-anchor="middle" font-size="12">Server</text>
  
  <!-- ESP32 Controller Node -->
  <rect x="350" y="400" width="100" height="60" fill="#e6f7ff" stroke="#0099cc" stroke-width="2" rx="10"/>
  <text x="400" y="425" text-anchor="middle" font-weight="bold" font-size="16">ESP32</text>
  <text x="400" y="445" text-anchor="middle" font-size="12">Controller</text>
  
  <!-- Relay Module Node -->
  <rect x="160" y="500" width="180" height="60" fill="#ffe6e6" stroke="#cc0000" stroke-width="2" rx="10"/>
  <text x="250" y="525" text-anchor="middle" font-weight="bold" font-size="16">5-Channel Relay</text>
  <text x="250" y="545" text-anchor="middle" font-size="12">Power Control</text>
  
  <!-- Sensors Node -->
  <rect x="460" y="500" width="180" height="60" fill="#e6f7ff" stroke="#0099cc" stroke-width="2" rx="10"/>
  <text x="550" y="525" text-anchor="middle" font-weight="bold" font-size="16">Voltage/Current</text>
  <text x="550" y="545" text-anchor="middle" font-size="12">Sensors</text>
  
  <!-- Power Outlets Box -->
  <rect x="160" y="580" width="480" height="40" fill="#dddddd" stroke="#333333" stroke-width="2" rx="0"/>
  <text x="400" y="605" text-anchor="middle" font-weight="bold" font-size="16">Power Outlets (I, II, III, IV, V)</text>
  
  <!-- User to UI Connection -->
  <line x1="400" y1="140" x2="400" y2="180" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="420" y="165" text-anchor="start" font-size="12">User Input</text>
  
  <!-- UI to Blynk Cloud Connection -->
  <line x1="400" y1="240" x2="400" y2="250" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="420" y="265" text-anchor="start" font-size="12">HTTP/S</text>
  
  <!-- Blynk Cloud to ESP32 Connection -->
  <line x1="400" y1="350" x2="400" y2="400" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="420" y="380" text-anchor="start" font-size="12">WiFi</text>
  
  <!-- ESP32 to Relay Connection -->
  <line x1="350" y1="430" x2="250" y2="500" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="270" y="480" text-anchor="middle" font-size="12">Control Signals</text>
  
  <!-- ESP32 to Sensors Connection -->
  <line x1="450" y1="430" x2="550" y2="500" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="530" y="480" text-anchor="middle" font-size="12">Analog Inputs</text>
  
  <!-- Relay to Power Outlets Connection -->
  <line x1="250" y1="560" x2="250" y2="580" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="150" y="570" text-anchor="middle" font-size="12">Power Switching</text>
  
  <!-- Sensors to Power Outlets Connection -->
  <line x1="550" y1="560" x2="550" y2="580" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="650" y="570" text-anchor="middle" font-size="12">Monitoring</text>
  
  <!-- Feedback Loops -->
  <!-- Sensors to ESP32 -->
  <path d="M 600,500 C 650,500 650,430 600,430 L 450,430" stroke="#333333" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)" fill="none"/>
  <text x="640" y="450" text-anchor="middle" font-size="12">Data Feedback</text>
  
  <!-- ESP32 to Blynk Cloud -->
  <path d="M 320,400 C 270,400 270,300 280,300 L 280,300" stroke="#333333" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)" fill="none"/>
  <text x="240" y="355" text-anchor="middle" font-size="12">Status Updates</text>
  
  <!-- Blynk Cloud to UI -->
  <path d="M 280,300 C 270,300 270,210 350,210" stroke="#333333" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)" fill="none"/>
  <text x="240" y="265" text-anchor="middle" font-size="12">Display Updates</text>
  
  <!-- UI to User -->
  <path d="M 330,180 C 280,180 280,110 350,110" stroke="#333333" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)" fill="none"/>
  <text x="240" y="145" text-anchor="middle" font-size="12">Visual Feedback</text>
  
  <!-- Schedule Control Path -->
  <path d="M 450,210 C 550,210 550,380 450,380" stroke="#ff9800" stroke-width="3" stroke-dasharray="10,5" marker-end="url(#arrowhead)" fill="none"/>
  <text x="570" y="300" text-anchor="middle" font-size="14" fill="#ff9800" font-weight="bold">Schedule Control</text>
  
  <!-- Legend -->
  <rect x="600" y="80" width="180" height="150" fill="#f8f8f8" stroke="#333333" stroke-width="1" rx="5"/>
  <text x="690" y="100" text-anchor="middle" font-weight="bold" font-size="14">Legend</text>
  
  <!-- Control Signal -->
  <line x1="610" y1="120" x2="650" y2="120" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="690" y="125" text-anchor="start" font-size="12">Control Signal</text>
  
  <!-- Data Feedback -->
  <line x1="610" y1="150" x2="650" y2="150" stroke="#333333" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>
  <text x="690" y="155" text-anchor="start" font-size="12">Data Feedback</text>
  
  <!-- Schedule Control -->
  <line x1="610" y1="180" x2="650" y2="180" stroke="#ff9800" stroke-width="3" stroke-dasharray="10,5" marker-end="url(#arrowhead)"/>
  <text x="690" y="185" text-anchor="start" font-size="12">Schedule Control</text>
  
  <!-- Main Functions -->
  <rect x="600" y="250" width="180" height="170" fill="#f8f8f8" stroke="#333333" stroke-width="1" rx="5"/>
  <text x="690" y="270" text-anchor="middle" font-weight="bold" font-size="14">Main Functions</text>
  
  <text x="610" y="295" text-anchor="start" font-size="12">• Socket Power Control</text>
  <text x="610" y="320" text-anchor="start" font-size="12">• Power Monitoring</text>
  <text x="610" y="345" text-anchor="start" font-size="12">• Schedule Management</text>
  <text x="610" y="370" text-anchor="start" font-size="12">• Master Power Control</text>
  <text x="610" y="395" text-anchor="start" font-size="12">• Status Visualization</text>
</svg>